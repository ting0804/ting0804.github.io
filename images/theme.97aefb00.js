!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).__inside__||(self.__inside__={}))}(this,(function(e){"use strict";const t=/#(?:[0-9a-fA-F]{3}){1,2}/,n=/rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)/,o="__inside__",r='-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif',c={accent_color:"#2a2b33",foreground_color:"#363636",border_color:"#e0e0e0",background:"#f3f6f7",sidebar_background:"#2a2b33",card_background:"#fff",content_width:"660px","font.base":r,"font.logo":r,"font.menu":r,"font.heading":r,"font.label":r,"font.code":r,"font.print":r,highlight:["#ffffff","#e0e0e0","#f3f6f7","#95a5b3","#363636","#262b2f","#000000","#000000","#5d6c7b","#40464a","#2980b9","#be516e","#237dac","#944770","#239371","#edf0f3"]},i="undefined"!=typeof document;if(i){document.addEventListener("inside:theme",(function(e){document.dispatchEvent(new CustomEvent("inside",{detail:{type:"theme",data:e.detail}}))})),document.addEventListener("inside",(function(e){if(!i||"theme"!==e.detail.type)return!1;l(e.detail.data)}));const e=a(),t=()=>{localStorage.removeItem(o),l(Object.assign(Object.assign({},window[o].theme.default),{name:"default"}),!0)};e&&e.hash===(window[o]||{}).hash?l(e.theme):t()}function a(){const e=localStorage.getItem(o);if(e)try{return JSON.parse(e)}catch(e){}}function l(e,t){var n,r;let c=document.querySelector('style[is="theme"]');const i=document.querySelector('meta[name="theme-color"]'),l=window[o]||{};c||(c=document.createElement("style"),c.setAttribute("is","theme"),document.body.appendChild(c));const d="dark"===(e.name||(null===(r=null===(n=a())||void 0===n?void 0:n.theme)||void 0===r?void 0:r.name))?"dark":"default";l.theme[d]=Object.assign({},l.theme.default,l.theme[d],e),l.color=[b(l.theme[d].sidebar_background).color||l.theme[d].accent_color].concat(b(l.theme[d].background).color||[]),t&&c.innerHTML||(c.innerHTML=f(l.theme[d]),i&&(i.content=l.color[l.color.length-1])),localStorage.setItem(o,JSON.stringify({theme:l.theme[d],hash:l.hash}))}function f(e){if(!e)return"";const o=function(e,t){const n={},{accent_color:o,foreground_color:r,border_color:c,background:i,sidebar_background:a,card_background:l,content_width:f,highlight:u}=e,g=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n}(e,["accent_color","foreground_color","border_color","background","sidebar_background","card_background","content_width","highlight"]);n.accent_color=o?s(o).hex:t.accent_color,n.foreground_color=r?s(r).hex:t.foreground_color,n.border_color=c?s(c).hex:t.border_color,n.background=i?d(i):t.background,n.sidebar_background=a?d(a):n.accent_color||t.sidebar_background,n.card_background=l?d(l):t.card_background;const b=g["font.base"]?h(g["font.base"]):t["font.base"].split(",");n["font.base"]=String(b),n["font.logo"]=g["font.logo"]?h(g["font.logo"],b).join(","):t["font.logo"],n["font.menu"]=g["font.menu"]?h(g["font.menu"],b).join(","):t["font.menu"],n["font.heading"]=g["font.heading"]?h(g["font.heading"],b).join(","):t["font.heading"],n["font.label"]=g["font.label"]?h(g["font.label"],b).join(","):t["font.label"],n["font.code"]=g["font.code"]?h(g["font.code"]).join(","):t["font.code"],n["font.print"]=g["font.print"]?h(g["font.print"]).join(","):t["font.print"];const m=function(e){if(!e)return;if("number"==typeof e)return{value:e,unit:"px"};const t=e.match(/^(\d+)(%|rem|px)$/);if(t)return{value:+t[1],unit:t[2]}}(f);n.content_width=m?m.value+m.unit:t.content_width,Array.isArray(u)?(n.highlight=u.map((e=>s(e).hex)).filter((e=>e)),n.highlight.length<16&&(n.highlight=t.highlight)):n.highlight=t.highlight;return n}(e,c),r=(o.card_background.match(t)||o.card_background.match(n)||[])[0]||o.foreground_color,i=s(o.accent_color);return`html{${function(e={},t="var"){return n(e);function n(e,o=[],r){for(const c in e){const i=e[c];if(Array.isArray(i))i.forEach(((e,t)=>{let r=t.toString(16);return r.length<2&&(r=`0${r}`),n({[r]:e},o,c)}));else if("object"==typeof i)n(i,o,c);else{const e=(r?r+"_":"")+c;o.push([`--${t}-${e.replace(/[\._]/g,"-")}`,i,e])}}return o}}(Object.assign(Object.assign({},o),{card_color:r,accent_color_005:`rgba(${i.r},${i.g},${i.b},.05)`,accent_color_01:`rgba(${i.r},${i.g},${i.b},.1)`,accent_color_02:`rgba(${i.r},${i.g},${i.b},.2)`,accent_color_04:`rgba(${i.r},${i.g},${i.b},.4)`,accent_color_08:`rgba(${i.r},${i.g},${i.b},.8)`,accent_color:i.hex}),"inside").map((e=>e.slice(0,2).join(":"))).join(";")}}`}function d(e){const t=/(^data:image)|(^[^\(^'^"]*\.(jpg|png|gif|svg))/;return e.split(/\s+/).map((e=>e.match(t)?`url(${e})`:e)).join(" ")}function s(e,o){if(e=(e||"").trim(),t.test(e))return Object.assign({hex:e},g(e));if(n.test(e)){const t=e.match(n).slice(1,4).map((e=>+e)).filter((e=>e<256));if(3===t.length)return{hex:u.apply(null,t),r:t[0],g:t[1],b:t[2]}}return o?Object.assign({hex:o},g(o)):{}}function u(e,t,n){return"#"+((1<<24)+(e<<16)+(t<<8)+n).toString(16).slice(1)}function g(e){e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,n,o){return t+t+n+n+o+o}));const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}function h(e,t=[]){const n=e?e.split(",").map((e=>e.trim())).filter((e=>e)):[];return Array.from(new Set(n.concat(t)))}function b(e){if(!e)return{};const n=e.split(/\s+/);if(t.test(n[0]))return{color:n[0],image:n.slice(1).join(" ")};const o=n.length-1;return n[o]&&t.test(n[o])?{color:n.pop(),image:n.join(" ")}:{image:e}}e.css=f,Object.defineProperty(e,"__esModule",{value:!0})}));
